<div>
  @if (mappingType === 'CATEGORY_MAPPING') {
    <div>
      <p-table [value]="groupedError">
        <ng-template pTemplate="header">
          <tr>
            <th>{{ 'dashboardMappingResolve.categoryHeader' | transloco }}</th>
            <th>{{ getCategoryDestinationType() | snakeCaseToSpaceCase | sentenceCase }}</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-error let-rowIndex="rowIndex">
          @if (!isLoading) {
            <tr>
              <td>{{ error.expense_attribute.value }}</td>
              <td>
                <p-select
                  appendTo="body"
                  (onShow)="tableDropdownWidth()"
                  [options]="getCategoryMappingOptions()"
                  optionLabel="value"
                  [placeholder]="'dashboardMappingResolve.selectOptionPlaceholder' | transloco"
                  (onChange)="saveCategoryMapping(error.expense_attribute, $event)"
                  [filter]="true"
                  filterBy="value"
                >
                </p-select>
              </td>
            </tr>
          }
          <ng-container *ngTemplateOutlet="shimmers"></ng-container>
        </ng-template>
      </p-table>
    </div>
  }
  @if (mappingType === 'EMPLOYEE_MAPPING') {
    <div>
      <p-table [value]="groupedError">
        <ng-template pTemplate="header">
          <tr>
            <th>{{ 'dashboardMappingResolve.employeeEmailHeader' | transloco }}</th>
            <th>
              {{ 'dashboardMappingResolve.sageIntacctHeader' | transloco }}{{ getEmployeeAttributeType() | lowercase }}
            </th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-error>
          @if (!isLoading) {
            <tr>
              <td>{{ error.expense_attribute.value }}</td>
              <td>
                <p-select
                  appendTo="body"
                  (onShow)="tableDropdownWidth()"
                  [options]="fyleEmployeeOptions"
                  optionLabel="value"
                  [placeholder]="'dashboardMappingResolve.selectOptionPlaceholder' | transloco"
                  (onChange)="saveEmployeeMapping(error.expense_attribute, $event)"
                  [filter]="true"
                  filterBy="value"
                >
                </p-select>
              </td>
            </tr>
          }
          <ng-container *ngTemplateOutlet="shimmers"></ng-container>
        </ng-template>
      </p-table>
    </div>
  }
</div>

<ng-template #shimmers>
  @for (_ of [0, 1, 2, 3, 4, 5, 6]; track _) {
    <tr>
      @if (isLoading) {
        <td><p-skeleton width="150px" height="28px" shape="rectangle"></p-skeleton></td>
      }
      @if (isLoading) {
        <td><p-skeleton width="250px" height="28px" shape="rectangle"></p-skeleton></td>
      }
    </tr>
  }
</ng-template>
