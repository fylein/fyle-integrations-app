<div *ngIf="isLoading" class="tw-flex tw-justify-center tw-items-center tw-h-screen">
    <app-loader></app-loader>
</div>
<div *ngIf="!isLoading" class="tw-py-16-px tw-px-120-px">
        <div class="tw-inline-flex tw-space-x-4">
            <div class="tw-rounded-10-px tw-bg-white tw-border-1-px tw-border-separator tw-p-16-px tw-w-200-px tw-h-84-px">
                <div class="tw-w-36-px tw-h-6-px tw-rounded-12-px tw-border tw-bg-mandatory-field-color">
                </div>
                <div class="tw-pt-8-px tw-text-faded-text-color tw-text-12-px">
                    <p>Total Employees</p>
                </div>
                <div class="tw-text-20-px tw-text-500 tw-text-slightly-normal-text-color">
                    <!-- <p>{{mappingStats.all_attributes_count}}</p> -->
                </div>
            </div>
        
            <div class="tw-rounded-12-px tw-bg-white tw-border-1-px tw-border-separator tw-p-16-px tw-w-200-px tw-h-84-px">
                <div class="tw-w-36-px tw-h-6-px tw-rounded-12-px tw-border tw-bg-mandatory-field-color">
                </div>
                <div class="tw-pt-8-px tw-text-faded-text-color tw-text-12-px">
                    <p>Unmapped Employees</p>
                </div>
                <div class="tw-text-20-px tw-text-500 tw-text-slightly-normal-text-color">
                    <!-- <p>{{mappingStats.unmapped_attributes_count}}</p> -->
                </div>
            </div>
        </div>

    <div class="tw-shadow-app-card tw-rounded-12-px tw-bg-white tw-border-1-px tw-border-separator tw-mt-16-px">
        <div class="tw-p-24-px tw-border tw-border-b-separator">
            <app-mapping-filter [mappingFilter]="selectedMappingFilter" (mappingFilterChangeEvent)="mappingStateFilter($event)" (mappingSearchingEvent)="mappingSeachingFilter($event)"></app-mapping-filter>
        </div>
        <div *ngIf="totalCount > 0" >
            <div>
                <p-table [value]="mappings" [tableStyle]="{ 'min-width': '50rem' }">
                    <ng-template pTemplate="header">
                      <tr>
                        <th>{{getAttributesFilteredByConfig()[0]}} in Fyle</th>
                        <th>{{getAttributesFilteredByConfig()[0]}} in Intacct</th>
                        <th>Status</th>
                      </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-mapping>
                      <tr>
                        <td>{{ mapping.value }}</td>
                        <td>
                          <p-dropdown [ngModel]="getDropdownValue(mapping.employeemapping)" [options]="fyleEmployeeOptions" optionLabel="value" placeholder="Select an Option" (onChange)="save(mapping, $event)">
                          </p-dropdown>
                        </td>
                        <td>
                            <!-- TODO: add a search atlast -->
                            <!-- add mapped unmapped value to third column -->
                          <p *ngIf="getDropdownValue(mapping.employeemapping)" class="mapped">MAPPED</p>
                          <p *ngIf="!getDropdownValue(mapping.employeemapping)" class="unmapped">UNMAPPED</p>
                        </td>
                      </tr>
                    </ng-template>
                  </p-table>                  
            </div>
        </div>
        <div class="tw-p-24-px tw-border tw-border-t-separator" *ngIf="totalCount > 0" >
            <app-paginator [totalCount]="totalCount" [pageType]="PaginatorPage.MAPPING" [page]="currentPage" [dropDownValue]="limit" (pageSizeChangeEvent)="pageSizeChanges($event)" (pageOffsetChangeEvent)="pageOffsetChanges($event)"></app-paginator>
        </div>
        <div *ngIf="totalCount === 0">
            <app-zero-state-with-illustration [mainText]="'No employees to show yet!'" [subText]="'Looks like your search term does not match any of Employee mappings'"></app-zero-state-with-illustration>
        </div>
    </div>
</div>
