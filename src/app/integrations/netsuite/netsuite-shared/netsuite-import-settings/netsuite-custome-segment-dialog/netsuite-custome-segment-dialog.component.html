<div [formGroup]="form">
    <div>
        <p-dialog header="Add Custom Segment/List/Record" [dismissableMask]="true" [(visible)]="isCustomeSegmentDialogVisible" [showHeader]="true" [modal]="true" (onHide)="close()" [breakpoints]="{ '960px': '75vw' }" [draggable]="false" >
            <div *ngIf="isLoading" class="tw-flex tw-justify-center tw-items-center tw-h-screen">
                <app-loader></app-loader>
            </div>
            <div *ngIf="!isLoading">
                <ng-template pTemplate="header">
                    <div>
                       <span class="tw-text-20-px tw-font-500 tw-text-modal-header-text-color">Add Custom Segment/List/Record</span> 
                    </div>
                </ng-template>
                <div class="tw-p-24-px tw-border-t tw-border-t-border-tertiary">
                    <div *ngIf="isCustomTypeSelectionActive">
                        <div class="tw-mb-14-px">
                            <div class="tw-mb-10-px">
                                <app-mandatory-field></app-mandatory-field><label for="" class="tw-text-14-px tw-text-form-label-text-color tw-font-400">{{getCustomeSegmentTypeLabel()}}</label>
                            </div>
                            <div>
                                <p-dropdown appendTo="body" [options]="options"
                                    formControlName="custom_field_type" placeholder="Select custom field type"
                                    [dropdownIcon]="'pi pi-chevron-down ' + brandConfig.brandId"
                                    [ngClass]="{
                                        'error-box': form.controls.custom_field_type.invalid && true && form.controls.custom_field_type.touched,
                                        'normal-box': !(form.controls.custom_field_type.invalid && true && form.controls.custom_field_type.touched)
                                    }" [required]="true">
                                    <ng-template let-option pTemplate="item">
                                        <div>
                                            {{ brandConfig.brandId ==='co' ? (option.label| sentenceCase) : (option.label)}}
                                        </div>
                                    </ng-template>
                                    <ng-template pTemplate="selectedItem" let-item>
                                        <span>
                                            {{ brandConfig.brandId ==='co' ? (item.label| sentenceCase) : (item.label)}}
                                        </span>
                                    </ng-template>
                                </p-dropdown>
                                <app-mandatory-error-message *ngIf="form.controls.custom_field_type.touched && !form.controls.custom_field_type.valid && !form.controls.custom_field_type.disabled" [customErrorMessage]="'Please select sutom field type'"></app-mandatory-error-message>
                            </div>
                        </div>
                        <div>
                            <app-configuration-info-label
                                [infoText]="'Follow the steps as shown below to access the necessary details on your Netsuite account.'">
                            </app-configuration-info-label>
                            <video controls="controls" width="800" height="600" name="sample video" class="tw-mt-16-px" loop autoplay>
                                <source src="assets/illustrations/netsuite/custom-field-type.mov">
                            </video>
                        </div>
                    </div>
                    <div *ngIf="isInternalIDSelectionActive">
                        <div class="tw-mb-14-px">
                            <div class="tw-mb-10-px">
                                <app-mandatory-field></app-mandatory-field><label for="" class="tw-text-14-px tw-text-form-label-text-color tw-font-400">{{getInternalIDLabel()}}</label>
                            </div>
                            <div>
                                <input type="text" class="tw-border-box-color" [ngClass]="[form.controls.internal_id.invalid && form.controls.internal_id.touched ? 'error-box' : 'normal-box']"  pInputText formControlName="internal_id" [placeholder]="getInternalIDLabel()" required>
                                <app-mandatory-error-message *ngIf="form.controls.internal_id.touched && !form.controls.internal_id.valid && !form.controls.internal_id.disabled" [customErrorMessage]="'Please enter internal id'"></app-mandatory-error-message>
                            </div>
                        </div>
                        <div>
                            <app-configuration-info-label
                                [infoText]="'Follow the steps as shown below to access the necessary details on your Netsuite account.'">
                            </app-configuration-info-label>
                            <img class="tw-mt-16-px" width="800" height="600" [src]="getCustomSegmentImage()" alt="">
                        </div>
                    </div>
                    <div *ngIf="isTransactionLineSectionActive">
                        <div class="tw-mb-14-px">
                            <div class="tw-mb-10-px">
                                <app-mandatory-field></app-mandatory-field><label for="" class="tw-text-14-px tw-text-form-label-text-color tw-font-400">{{getTransactionIdLabel()}}</label>
                            </div>
                            <div>
                                <input type="text" class="tw-border-box-color" [ngClass]="[form.controls.script_id.invalid && form.controls.script_id.touched ? 'error-box' : 'normal-box']"  pInputText formControlName="script_id" [placeholder]="getTransactionIdLabel()" required>
                                <app-mandatory-error-message *ngIf="form.controls.script_id.touched && !form.controls.script_id.valid && !form.controls.script_id.disabled" [customErrorMessage]="'Please enter transaction line field id'"></app-mandatory-error-message>
                            </div>
                        </div>
                        <div>
                            <app-configuration-info-label
                                [infoText]="'Follow the steps as shown below to access the necessary details on your Netsuite account.'">
                            </app-configuration-info-label>
                            <img width="800" height="600" class="tw-mt-16-px" src="assets/illustrations/netsuite/png/field-line-item.png" alt="">
                        </div>
                    </div>
                </div>
                <div class="tw-p-24-px tw-border-t tw-border-t-border-tertiary">
                    <div class="tw-flex tw-justify-end tw-text-14-px">
                        <div class="tw-mr-16-px">
                            <button type="button" class="p-button outline-sm" (click)="close()">
                                Cancel
                            </button>
                        </div>
                        <button *ngIf="stepNumber < 3" type="button" pButton [disabled]="isDisabled()" (click)="proceedToNextStep(stepNumber)">
                            Next
                        </button>
                        <button *ngIf="stepNumber === 3" type="button" pButton [disabled]="form.invalid" (click)="save()">
                            Save
                        </button>
                    </div>
                </div>
            </div>
        </p-dialog>
    </div>
</div>
